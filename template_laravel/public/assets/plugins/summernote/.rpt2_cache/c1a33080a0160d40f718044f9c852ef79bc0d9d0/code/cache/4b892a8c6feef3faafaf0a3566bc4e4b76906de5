{"code":"import $ from 'jquery';\r\nimport lists from '../core/lists';\r\nimport dom from '../core/dom';\r\n/**\r\n * Image popover module\r\n *  mouse events that show/hide popover will be handled by Handle.js.\r\n *  Handle.js will receive the events and invoke 'imagePopover.update'.\r\n */\r\nvar ImagePopover = /** @class */ (function () {\r\n    function ImagePopover(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.ui = $.summernote.ui;\r\n        this.editable = context.layoutInfo.editable[0];\r\n        this.options = context.options;\r\n        this.events = {\r\n            'summernote.disable': function () {\r\n                _this.hide();\r\n            }\r\n        };\r\n    }\r\n    ImagePopover.prototype.shouldInitialize = function () {\r\n        return !lists.isEmpty(this.options.popover.image);\r\n    };\r\n    ImagePopover.prototype.initialize = function () {\r\n        this.$popover = this.ui.popover({\r\n            className: 'note-image-popover'\r\n        }).render().appendTo(this.options.container);\r\n        var $content = this.$popover.find('.popover-content,.note-popover-content');\r\n        this.context.invoke('buttons.build', $content, this.options.popover.image);\r\n    };\r\n    ImagePopover.prototype.destroy = function () {\r\n        this.$popover.remove();\r\n    };\r\n    ImagePopover.prototype.update = function (target) {\r\n        if (dom.isImg(target)) {\r\n            var pos = dom.posFromPlaceholder(target);\r\n            var posEditor = dom.posFromPlaceholder(this.editable);\r\n            this.$popover.css({\r\n                display: 'block',\r\n                left: this.options.popatmouse ? event.pageX - 20 : pos.left,\r\n                top: this.options.popatmouse ? event.pageY : Math.min(pos.top, posEditor.top)\r\n            });\r\n        }\r\n        else {\r\n            this.hide();\r\n        }\r\n    };\r\n    ImagePopover.prototype.hide = function () {\r\n        this.$popover.hide();\r\n    };\r\n    return ImagePopover;\r\n}());\r\nexport default ImagePopover;\r\n//# sourceMappingURL=ImagePopover.js.map","map":{"version":3,"file":"ImagePopover.js","sourceRoot":"","sources":["../../src/js/base/module/ImagePopover.js"],"names":[],"mappings":"AAAA,OAAO,CAAC,MAAM,QAAQ,CAAC;AACvB,OAAO,KAAK,MAAM,eAAe,CAAC;AAClC,OAAO,GAAG,MAAM,aAAa,CAAC;AAE9B;;;;GAIG;AACH;IACE,sBAAY,OAAO;QAAnB,iBAYC;QAXC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC;QAE1B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC/C,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;QAE/B,IAAI,CAAC,MAAM,GAAG;YACZ,oBAAoB,EAAE;gBACpB,KAAI,CAAC,IAAI,EAAE,CAAC;YACd,CAAC;SACF,CAAC;IACJ,CAAC;IAED,uCAAgB,GAAhB;QACE,MAAM,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IACpD,CAAC;IAED,iCAAU,GAAV;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC;YAC9B,SAAS,EAAE,oBAAoB;SAChC,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QAC7C,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,wCAAwC,CAAC,CAAC;QAC9E,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,eAAe,EAAE,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAC7E,CAAC;IAED,8BAAO,GAAP;QACE,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;IACzB,CAAC;IAED,6BAAM,GAAN,UAAO,MAAM;QACX,EAAE,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACtB,IAAM,GAAG,GAAG,GAAG,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;YAC3C,IAAM,SAAS,GAAG,GAAG,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACxD,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC;gBAChB,OAAO,EAAE,OAAO;gBAChB,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI;gBAC3D,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,SAAS,CAAC,GAAG,CAAC;aAC9E,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,IAAI,EAAE,CAAC;QACd,CAAC;IACH,CAAC;IAED,2BAAI,GAAJ;QACE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACvB,CAAC;IACH,mBAAC;AAAD,CAAC,AAhDD,IAgDC"}}
