{"code":"import $ from 'jquery';\r\nimport env from '../core/env';\r\nimport key from '../core/key';\r\nimport func from '../core/func';\r\nimport lists from '../core/lists';\r\nimport dom from '../core/dom';\r\nimport range from '../core/range';\r\nimport { readFileAsDataURL, createImage } from '../core/async';\r\nimport History from '../editing/History';\r\nimport Style from '../editing/Style';\r\nimport Typing from '../editing/Typing';\r\nimport Table from '../editing/Table';\r\nimport Bullet from '../editing/Bullet';\r\nvar KEY_BOGUS = 'bogus';\r\n/**\r\n * @class Editor\r\n */\r\nvar Editor = /** @class */ (function () {\r\n    function Editor(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.$note = context.layoutInfo.note;\r\n        this.$editor = context.layoutInfo.editor;\r\n        this.$editable = context.layoutInfo.editable;\r\n        this.options = context.options;\r\n        this.lang = this.options.langInfo;\r\n        this.editable = this.$editable[0];\r\n        this.lastRange = null;\r\n        this.style = new Style();\r\n        this.table = new Table();\r\n        this.typing = new Typing();\r\n        this.bullet = new Bullet();\r\n        this.history = new History(this.$editable);\r\n        this.context.memo('help.undo', this.lang.help.undo);\r\n        this.context.memo('help.redo', this.lang.help.redo);\r\n        this.context.memo('help.tab', this.lang.help.tab);\r\n        this.context.memo('help.untab', this.lang.help.untab);\r\n        this.context.memo('help.insertParagraph', this.lang.help.insertParagraph);\r\n        this.context.memo('help.insertOrderedList', this.lang.help.insertOrderedList);\r\n        this.context.memo('help.insertUnorderedList', this.lang.help.insertUnorderedList);\r\n        this.context.memo('help.indent', this.lang.help.indent);\r\n        this.context.memo('help.outdent', this.lang.help.outdent);\r\n        this.context.memo('help.formatPara', this.lang.help.formatPara);\r\n        this.context.memo('help.insertHorizontalRule', this.lang.help.insertHorizontalRule);\r\n        this.context.memo('help.fontName', this.lang.help.fontName);\r\n        // native commands(with execCommand), generate function for execCommand\r\n        var commands = [\r\n            'bold', 'italic', 'underline', 'strikethrough', 'superscript', 'subscript',\r\n            'justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull',\r\n            'formatBlock', 'removeFormat', 'backColor'\r\n        ];\r\n        for (var idx = 0, len = commands.length; idx < len; idx++) {\r\n            this[commands[idx]] = (function (sCmd) {\r\n                return function (value) {\r\n                    _this.beforeCommand();\r\n                    document.execCommand(sCmd, false, value);\r\n                    _this.afterCommand(true);\r\n                };\r\n            })(commands[idx]);\r\n            this.context.memo('help.' + commands[idx], this.lang.help[commands[idx]]);\r\n        }\r\n        this.fontName = this.wrapCommand(function (value) {\r\n            return _this.fontStyling('font-family', \"\\'\" + value + \"\\'\");\r\n        });\r\n        this.fontSize = this.wrapCommand(function (value) {\r\n            return _this.fontStyling('font-size', value + 'px');\r\n        });\r\n        for (var idx = 1; idx <= 6; idx++) {\r\n            this['formatH' + idx] = (function (idx) {\r\n                return function () {\r\n                    _this.formatBlock('H' + idx);\r\n                };\r\n            })(idx);\r\n            this.context.memo('help.formatH' + idx, this.lang.help['formatH' + idx]);\r\n        }\r\n        ;\r\n        this.insertParagraph = this.wrapCommand(function () {\r\n            _this.typing.insertParagraph(_this.editable);\r\n        });\r\n        this.insertOrderedList = this.wrapCommand(function () {\r\n            _this.bullet.insertOrderedList(_this.editable);\r\n        });\r\n        this.insertUnorderedList = this.wrapCommand(function () {\r\n            _this.bullet.insertUnorderedList(_this.editable);\r\n        });\r\n        this.indent = this.wrapCommand(function () {\r\n            _this.bullet.indent(_this.editable);\r\n        });\r\n        this.outdent = this.wrapCommand(function () {\r\n            _this.bullet.outdent(_this.editable);\r\n        });\r\n        /**\r\n         * insertNode\r\n         * insert node\r\n         * @param {Node} node\r\n         */\r\n        this.insertNode = this.wrapCommand(function (node) {\r\n            if (_this.isLimited($(node).text().length)) {\r\n                return;\r\n            }\r\n            var rng = _this.createRange();\r\n            rng.insertNode(node);\r\n            range.createFromNodeAfter(node).select();\r\n        });\r\n        /**\r\n         * insert text\r\n         * @param {String} text\r\n         */\r\n        this.insertText = this.wrapCommand(function (text) {\r\n            if (_this.isLimited(text.length)) {\r\n                return;\r\n            }\r\n            var rng = _this.createRange();\r\n            var textNode = rng.insertNode(dom.createText(text));\r\n            range.create(textNode, dom.nodeLength(textNode)).select();\r\n        });\r\n        /**\r\n         * paste HTML\r\n         * @param {String} markup\r\n         */\r\n        this.pasteHTML = this.wrapCommand(function (markup) {\r\n            if (_this.isLimited(markup.length)) {\r\n                return;\r\n            }\r\n            var contents = _this.createRange().pasteHTML(markup);\r\n            range.createFromNodeAfter(lists.last(contents)).select();\r\n        });\r\n        /**\r\n         * formatBlock\r\n         *\r\n         * @param {String} tagName\r\n         */\r\n        this.formatBlock = this.wrapCommand(function (tagName, $target) {\r\n            var onApplyCustomStyle = _this.options.callbacks.onApplyCustomStyle;\r\n            if (onApplyCustomStyle) {\r\n                onApplyCustomStyle.call(_this, $target, _this.context, _this.onFormatBlock);\r\n            }\r\n            else {\r\n                _this.onFormatBlock(tagName, $target);\r\n            }\r\n        });\r\n        /**\r\n         * insert horizontal rule\r\n         */\r\n        this.insertHorizontalRule = this.wrapCommand(function () {\r\n            var hrNode = _this.createRange().insertNode(dom.create('HR'));\r\n            if (hrNode.nextSibling) {\r\n                range.create(hrNode.nextSibling, 0).normalize().select();\r\n            }\r\n        });\r\n        /**\r\n         * lineHeight\r\n         * @param {String} value\r\n         */\r\n        this.lineHeight = this.wrapCommand(function (value) {\r\n            _this.style.stylePara(_this.createRange(), {\r\n                lineHeight: value\r\n            });\r\n        });\r\n        /**\r\n         * create link (command)\r\n         *\r\n         * @param {Object} linkInfo\r\n         */\r\n        this.createLink = this.wrapCommand(function (linkInfo) {\r\n            var linkUrl = linkInfo.url;\r\n            var linkText = linkInfo.text;\r\n            var isNewWindow = linkInfo.isNewWindow;\r\n            var rng = linkInfo.range || _this.createRange();\r\n            var isTextChanged = rng.toString() !== linkText;\r\n            // handle spaced urls from input\r\n            if (typeof linkUrl === 'string') {\r\n                linkUrl = linkUrl.trim();\r\n            }\r\n            if (_this.options.onCreateLink) {\r\n                linkUrl = _this.options.onCreateLink(linkUrl);\r\n            }\r\n            else {\r\n                // if url doesn't match an URL schema, set http:// as default\r\n                linkUrl = /^[A-Za-z][A-Za-z0-9+-.]*\\:[\\/\\/]?/.test(linkUrl)\r\n                    ? linkUrl : 'http://' + linkUrl;\r\n            }\r\n            var anchors = [];\r\n            if (isTextChanged) {\r\n                rng = rng.deleteContents();\r\n                var anchor = rng.insertNode($('<A>' + linkText + '</A>')[0]);\r\n                anchors.push(anchor);\r\n            }\r\n            else {\r\n                anchors = _this.style.styleNodes(rng, {\r\n                    nodeName: 'A',\r\n                    expandClosestSibling: true,\r\n                    onlyPartialContains: true\r\n                });\r\n            }\r\n            $.each(anchors, function (idx, anchor) {\r\n                $(anchor).attr('href', linkUrl);\r\n                if (isNewWindow) {\r\n                    $(anchor).attr('target', '_blank');\r\n                }\r\n                else {\r\n                    $(anchor).removeAttr('target');\r\n                }\r\n            });\r\n            var startRange = range.createFromNodeBefore(lists.head(anchors));\r\n            var startPoint = startRange.getStartPoint();\r\n            var endRange = range.createFromNodeAfter(lists.last(anchors));\r\n            var endPoint = endRange.getEndPoint();\r\n            range.create(startPoint.node, startPoint.offset, endPoint.node, endPoint.offset).select();\r\n        });\r\n        /**\r\n         * setting color\r\n         *\r\n         * @param {Object} sObjColor  color code\r\n         * @param {String} sObjColor.foreColor foreground color\r\n         * @param {String} sObjColor.backColor background color\r\n         */\r\n        this.color = this.wrapCommand(function (colorInfo) {\r\n            var foreColor = colorInfo.foreColor;\r\n            var backColor = colorInfo.backColor;\r\n            if (foreColor) {\r\n                document.execCommand('foreColor', false, foreColor);\r\n            }\r\n            if (backColor) {\r\n                document.execCommand('backColor', false, backColor);\r\n            }\r\n        });\r\n        /**\r\n         * Set foreground color\r\n         *\r\n         * @param {String} colorCode foreground color code\r\n         */\r\n        this.foreColor = this.wrapCommand(function (colorInfo) {\r\n            document.execCommand('styleWithCSS', false, true);\r\n            document.execCommand('foreColor', false, colorInfo);\r\n        });\r\n        /**\r\n         * insert Table\r\n         *\r\n         * @param {String} dimension of table (ex : \"5x5\")\r\n         */\r\n        this.insertTable = this.wrapCommand(function (dim) {\r\n            var dimension = dim.split('x');\r\n            var rng = _this.createRange().deleteContents();\r\n            rng.insertNode(_this.table.createTable(dimension[0], dimension[1], _this.options));\r\n        });\r\n        /**\r\n         * remove media object and Figure Elements if media object is img with Figure.\r\n         */\r\n        this.removeMedia = this.wrapCommand(function () {\r\n            var $target = $(_this.restoreTarget()).parent();\r\n            if ($target.parent('figure').length) {\r\n                $target.parent('figure').remove();\r\n            }\r\n            else {\r\n                $target = $(_this.restoreTarget()).detach();\r\n            }\r\n            _this.context.triggerEvent('media.delete', $target, _this.$editable);\r\n        });\r\n        /**\r\n         * float me\r\n         *\r\n         * @param {String} value\r\n         */\r\n        this.floatMe = this.wrapCommand(function (value) {\r\n            var $target = $(_this.restoreTarget());\r\n            $target.toggleClass('note-float-left', value === 'left');\r\n            $target.toggleClass('note-float-right', value === 'right');\r\n            $target.css('float', value);\r\n        });\r\n        /**\r\n         * resize overlay element\r\n         * @param {String} value\r\n         */\r\n        this.resize = this.wrapCommand(function (value) {\r\n            var $target = $(_this.restoreTarget());\r\n            $target.css({\r\n                width: value * 100 + '%',\r\n                height: ''\r\n            });\r\n        });\r\n    }\r\n    Editor.prototype.initialize = function () {\r\n        var _this = this;\r\n        // bind custom events\r\n        this.$editable.on('keydown', function (event) {\r\n            if (event.keyCode === key.code.ENTER) {\r\n                _this.context.triggerEvent('enter', event);\r\n            }\r\n            _this.context.triggerEvent('keydown', event);\r\n            if (!event.isDefaultPrevented()) {\r\n                if (_this.options.shortcuts) {\r\n                    _this.handleKeyMap(event);\r\n                }\r\n                else {\r\n                    _this.preventDefaultEditableShortCuts(event);\r\n                }\r\n            }\r\n            if (_this.isLimited(1, event)) {\r\n                return false;\r\n            }\r\n        }).on('keyup', function (event) {\r\n            _this.context.triggerEvent('keyup', event);\r\n        }).on('focus', function (event) {\r\n            _this.context.triggerEvent('focus', event);\r\n        }).on('blur', function (event) {\r\n            _this.context.triggerEvent('blur', event);\r\n        }).on('mousedown', function (event) {\r\n            _this.context.triggerEvent('mousedown', event);\r\n        }).on('mouseup', function (event) {\r\n            _this.context.triggerEvent('mouseup', event);\r\n        }).on('scroll', function (event) {\r\n            _this.context.triggerEvent('scroll', event);\r\n        }).on('paste', function (event) {\r\n            _this.context.triggerEvent('paste', event);\r\n        });\r\n        // init content before set event\r\n        this.$editable.html(dom.html(this.$note) || dom.emptyPara);\r\n        this.$editable.on(env.inputEventName, func.debounce(function () {\r\n            _this.context.triggerEvent('change', _this.$editable.html());\r\n        }, 100));\r\n        this.$editor.on('focusin', function (event) {\r\n            _this.context.triggerEvent('focusin', event);\r\n        }).on('focusout', function (event) {\r\n            _this.context.triggerEvent('focusout', event);\r\n        });\r\n        if (!this.options.airMode) {\r\n            if (this.options.width) {\r\n                this.$editor.outerWidth(this.options.width);\r\n            }\r\n            if (this.options.height) {\r\n                this.$editable.outerHeight(this.options.height);\r\n            }\r\n            if (this.options.maxHeight) {\r\n                this.$editable.css('max-height', this.options.maxHeight);\r\n            }\r\n            if (this.options.minHeight) {\r\n                this.$editable.css('min-height', this.options.minHeight);\r\n            }\r\n        }\r\n        this.history.recordUndo();\r\n    };\r\n    Editor.prototype.destroy = function () {\r\n        this.$editable.off();\r\n    };\r\n    Editor.prototype.handleKeyMap = function (event) {\r\n        var keyMap = this.options.keyMap[env.isMac ? 'mac' : 'pc'];\r\n        var keys = [];\r\n        if (event.metaKey) {\r\n            keys.push('CMD');\r\n        }\r\n        if (event.ctrlKey && !event.altKey) {\r\n            keys.push('CTRL');\r\n        }\r\n        if (event.shiftKey) {\r\n            keys.push('SHIFT');\r\n        }\r\n        var keyName = key.nameFromCode[event.keyCode];\r\n        if (keyName) {\r\n            keys.push(keyName);\r\n        }\r\n        var eventName = keyMap[keys.join('+')];\r\n        if (eventName) {\r\n            if (this.context.invoke(eventName) !== false) {\r\n                event.preventDefault();\r\n            }\r\n        }\r\n        else if (key.isEdit(event.keyCode)) {\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    Editor.prototype.preventDefaultEditableShortCuts = function (event) {\r\n        // B(Bold, 66) / I(Italic, 73) / U(Underline, 85)\r\n        if ((event.ctrlKey || event.metaKey) &&\r\n            lists.contains([66, 73, 85], event.keyCode)) {\r\n            event.preventDefault();\r\n        }\r\n    };\r\n    Editor.prototype.isLimited = function (pad, event) {\r\n        pad = pad || 0;\r\n        if (typeof event !== 'undefined') {\r\n            if (key.isMove(event.keyCode) ||\r\n                (event.ctrlKey || event.metaKey) ||\r\n                lists.contains([key.code.BACKSPACE, key.code.DELETE], event.keyCode)) {\r\n                return false;\r\n            }\r\n        }\r\n        if (this.options.maxTextLength > 0) {\r\n            if ((this.$editable.text().length + pad) >= this.options.maxTextLength) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * create range\r\n     * @return {WrappedRange}\r\n     */\r\n    Editor.prototype.createRange = function () {\r\n        this.focus();\r\n        return range.create(this.editable);\r\n    };\r\n    /**\r\n     * saveRange\r\n     *\r\n     * save current range\r\n     *\r\n     * @param {Boolean} [thenCollapse=false]\r\n     */\r\n    Editor.prototype.saveRange = function (thenCollapse) {\r\n        this.lastRange = this.createRange();\r\n        if (thenCollapse) {\r\n            this.lastRange.collapse().select();\r\n        }\r\n    };\r\n    /**\r\n     * restoreRange\r\n     *\r\n     * restore lately range\r\n     */\r\n    Editor.prototype.restoreRange = function () {\r\n        if (this.lastRange) {\r\n            this.lastRange.select();\r\n            this.focus();\r\n        }\r\n    };\r\n    Editor.prototype.saveTarget = function (node) {\r\n        this.$editable.data('target', node);\r\n    };\r\n    Editor.prototype.clearTarget = function () {\r\n        this.$editable.removeData('target');\r\n    };\r\n    Editor.prototype.restoreTarget = function () {\r\n        return this.$editable.data('target');\r\n    };\r\n    /**\r\n     * currentStyle\r\n     *\r\n     * current style\r\n     * @return {Object|Boolean} unfocus\r\n     */\r\n    Editor.prototype.currentStyle = function () {\r\n        var rng = range.create();\r\n        if (rng) {\r\n            rng = rng.normalize();\r\n        }\r\n        return rng ? this.style.current(rng) : this.style.fromNode(this.$editable);\r\n    };\r\n    /**\r\n     * style from node\r\n     *\r\n     * @param {jQuery} $node\r\n     * @return {Object}\r\n     */\r\n    Editor.prototype.styleFromNode = function ($node) {\r\n        return this.style.fromNode($node);\r\n    };\r\n    /**\r\n     * undo\r\n     */\r\n    Editor.prototype.undo = function () {\r\n        this.context.triggerEvent('before.command', this.$editable.html());\r\n        this.history.undo();\r\n        this.context.triggerEvent('change', this.$editable.html());\r\n    };\r\n    /**\r\n     * redo\r\n     */\r\n    Editor.prototype.redo = function () {\r\n        this.context.triggerEvent('before.command', this.$editable.html());\r\n        this.history.redo();\r\n        this.context.triggerEvent('change', this.$editable.html());\r\n    };\r\n    /**\r\n     * before command\r\n     */\r\n    Editor.prototype.beforeCommand = function () {\r\n        this.context.triggerEvent('before.command', this.$editable.html());\r\n        // keep focus on editable before command execution\r\n        this.focus();\r\n    };\r\n    /**\r\n     * after command\r\n     * @param {Boolean} isPreventTrigger\r\n     */\r\n    Editor.prototype.afterCommand = function (isPreventTrigger) {\r\n        this.history.recordUndo();\r\n        if (!isPreventTrigger) {\r\n            this.context.triggerEvent('change', this.$editable.html());\r\n        }\r\n    };\r\n    /**\r\n     * handle tab key\r\n     */\r\n    Editor.prototype.tab = function () {\r\n        var rng = this.createRange();\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.table.tab(rng);\r\n        }\r\n        else {\r\n            if (this.options.tabSize === 0) {\r\n                return false;\r\n            }\r\n            if (!this.isLimited(this.options.tabSize)) {\r\n                this.beforeCommand();\r\n                this.typing.insertTab(rng, this.options.tabSize);\r\n                this.afterCommand();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * handle shift+tab key\r\n     */\r\n    Editor.prototype.untab = function () {\r\n        var rng = this.createRange();\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.table.tab(rng, true);\r\n        }\r\n        else {\r\n            if (this.options.tabSize === 0) {\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * run given function between beforeCommand and afterCommand\r\n     */\r\n    Editor.prototype.wrapCommand = function (fn) {\r\n        var _this = this;\r\n        return function () {\r\n            _this.beforeCommand();\r\n            fn.apply(_this, arguments);\r\n            _this.afterCommand();\r\n        };\r\n    };\r\n    /**\r\n     * insert image\r\n     *\r\n     * @param {String} src\r\n     * @param {String|Function} param\r\n     * @return {Promise}\r\n     */\r\n    Editor.prototype.insertImage = function (src, param) {\r\n        var _this = this;\r\n        return createImage(src, param).then(function ($image) {\r\n            _this.beforeCommand();\r\n            if (typeof param === 'function') {\r\n                param($image);\r\n            }\r\n            else {\r\n                if (typeof param === 'string') {\r\n                    $image.attr('data-filename', param);\r\n                }\r\n                $image.css('width', Math.min(_this.$editable.width(), $image.width()));\r\n            }\r\n            $image.show();\r\n            range.create(_this.editable).insertNode($image[0]);\r\n            range.createFromNodeAfter($image[0]).select();\r\n            _this.afterCommand();\r\n        }).fail(function (e) {\r\n            _this.context.triggerEvent('image.upload.error', e);\r\n        });\r\n    };\r\n    /**\r\n     * insertImages\r\n     * @param {File[]} files\r\n     */\r\n    Editor.prototype.insertImages = function (files) {\r\n        var _this = this;\r\n        $.each(files, function (idx, file) {\r\n            var filename = file.name;\r\n            if (_this.options.maximumImageFileSize && _this.options.maximumImageFileSize < file.size) {\r\n                _this.context.triggerEvent('image.upload.error', _this.lang.image.maximumFileSizeError);\r\n            }\r\n            else {\r\n                readFileAsDataURL(file).then(function (dataURL) {\r\n                    return _this.insertImage(dataURL, filename);\r\n                }).fail(function () {\r\n                    _this.context.triggerEvent('image.upload.error');\r\n                });\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * insertImagesOrCallback\r\n     * @param {File[]} files\r\n     */\r\n    Editor.prototype.insertImagesOrCallback = function (files) {\r\n        var callbacks = this.options.callbacks;\r\n        // If onImageUpload this.options setted\r\n        if (callbacks.onImageUpload) {\r\n            this.context.triggerEvent('image.upload', files);\r\n            // else insert Image as dataURL\r\n        }\r\n        else {\r\n            this.insertImages(files);\r\n        }\r\n    };\r\n    /**\r\n     * return selected plain text\r\n     * @return {String} text\r\n     */\r\n    Editor.prototype.getSelectedText = function () {\r\n        var rng = this.createRange();\r\n        // if range on anchor, expand range with anchor\r\n        if (rng.isOnAnchor()) {\r\n            rng = range.createFromNode(dom.ancestor(rng.sc, dom.isAnchor));\r\n        }\r\n        return rng.toString();\r\n    };\r\n    Editor.prototype.onFormatBlock = function (tagName, $target) {\r\n        // [workaround] for MSIE, IE need `<`\r\n        tagName = env.isMSIE ? '<' + tagName + '>' : tagName;\r\n        document.execCommand('FormatBlock', false, tagName);\r\n        // support custom class\r\n        if ($target && $target.length) {\r\n            var className = $target[0].className || '';\r\n            if (className) {\r\n                var currentRange = this.createRange();\r\n                var $parent = $([currentRange.sc, currentRange.ec]).closest(tagName);\r\n                $parent.addClass(className);\r\n            }\r\n        }\r\n    };\r\n    Editor.prototype.formatPara = function () {\r\n        this.formatBlock('P');\r\n    };\r\n    Editor.prototype.fontStyling = function (target, value) {\r\n        var rng = this.createRange();\r\n        if (rng) {\r\n            var spans = this.style.styleNodes(rng);\r\n            $(spans).css(target, value);\r\n            // [workaround] added styled bogus span for style\r\n            //  - also bogus character needed for cursor position\r\n            if (rng.isCollapsed()) {\r\n                var firstSpan = lists.head(spans);\r\n                if (firstSpan && !dom.nodeLength(firstSpan)) {\r\n                    firstSpan.innerHTML = dom.ZERO_WIDTH_NBSP_CHAR;\r\n                    range.createFromNodeAfter(firstSpan.firstChild).select();\r\n                    this.$editable.data(KEY_BOGUS, firstSpan);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * unlink\r\n     *\r\n     * @type command\r\n     */\r\n    Editor.prototype.unlink = function () {\r\n        var rng = this.createRange();\r\n        if (rng.isOnAnchor()) {\r\n            var anchor = dom.ancestor(rng.sc, dom.isAnchor);\r\n            rng = range.createFromNode(anchor);\r\n            rng.select();\r\n            this.beforeCommand();\r\n            document.execCommand('unlink');\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    /**\r\n     * returns link info\r\n     *\r\n     * @return {Object}\r\n     * @return {WrappedRange} return.range\r\n     * @return {String} return.text\r\n     * @return {Boolean} [return.isNewWindow=true]\r\n     * @return {String} [return.url=\"\"]\r\n     */\r\n    Editor.prototype.getLinkInfo = function () {\r\n        var rng = this.createRange().expand(dom.isAnchor);\r\n        // Get the first anchor on range(for edit).\r\n        var $anchor = $(lists.head(rng.nodes(dom.isAnchor)));\r\n        var linkInfo = {\r\n            range: rng,\r\n            text: rng.toString(),\r\n            url: $anchor.length ? $anchor.attr('href') : ''\r\n        };\r\n        // Define isNewWindow when anchor exists.\r\n        if ($anchor.length) {\r\n            linkInfo.isNewWindow = $anchor.attr('target') === '_blank';\r\n        }\r\n        return linkInfo;\r\n    };\r\n    Editor.prototype.addRow = function (position) {\r\n        var rng = this.createRange(this.$editable);\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.beforeCommand();\r\n            this.table.addRow(rng, position);\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    Editor.prototype.addCol = function (position) {\r\n        var rng = this.createRange(this.$editable);\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.beforeCommand();\r\n            this.table.addCol(rng, position);\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    Editor.prototype.deleteRow = function () {\r\n        var rng = this.createRange(this.$editable);\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.beforeCommand();\r\n            this.table.deleteRow(rng);\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    Editor.prototype.deleteCol = function () {\r\n        var rng = this.createRange(this.$editable);\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.beforeCommand();\r\n            this.table.deleteCol(rng);\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    Editor.prototype.deleteTable = function () {\r\n        var rng = this.createRange(this.$editable);\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.beforeCommand();\r\n            this.table.deleteTable(rng);\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    /**\r\n     * @param {Position} pos\r\n     * @param {jQuery} $target - target element\r\n     * @param {Boolean} [bKeepRatio] - keep ratio\r\n     */\r\n    Editor.prototype.resizeTo = function (pos, $target, bKeepRatio) {\r\n        var imageSize;\r\n        if (bKeepRatio) {\r\n            var newRatio = pos.y / pos.x;\r\n            var ratio = $target.data('ratio');\r\n            imageSize = {\r\n                width: ratio > newRatio ? pos.x : pos.y / ratio,\r\n                height: ratio > newRatio ? pos.x * ratio : pos.y\r\n            };\r\n        }\r\n        else {\r\n            imageSize = {\r\n                width: pos.x,\r\n                height: pos.y\r\n            };\r\n        }\r\n        $target.css(imageSize);\r\n    };\r\n    /**\r\n     * returns whether editable area has focus or not.\r\n     */\r\n    Editor.prototype.hasFocus = function () {\r\n        return this.$editable.is(':focus');\r\n    };\r\n    /**\r\n     * set focus\r\n     */\r\n    Editor.prototype.focus = function () {\r\n        // [workaround] Screen will move when page is scolled in IE.\r\n        //  - do focus when not focused\r\n        if (!this.hasFocus()) {\r\n            this.$editable.focus();\r\n        }\r\n    };\r\n    /**\r\n     * returns whether contents is empty or not.\r\n     * @return {Boolean}\r\n     */\r\n    Editor.prototype.isEmpty = function () {\r\n        return dom.isEmpty(this.$editable[0]) || dom.emptyPara === this.$editable.html();\r\n    };\r\n    /**\r\n     * Removes all contents and restores the editable instance to an _emptyPara_.\r\n     */\r\n    Editor.prototype.empty = function () {\r\n        this.context.invoke('code', dom.emptyPara);\r\n    };\r\n    return Editor;\r\n}());\r\nexport default Editor;\r\n//# sourceMappingURL=Editor.js.map","map":{"version":3,"file":"Editor.js","sourceRoot":"","sources":["../../src/js/base/module/Editor.js"],"names":[],"mappings":"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"}}
